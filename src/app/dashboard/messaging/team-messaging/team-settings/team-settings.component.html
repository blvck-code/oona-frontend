<div class="create-dialog">
  <div class="d-flex justify-content-end mb-2" >
    <i style="cursor: pointer" mat-dialog-close (click)="closeTeamSettings()" class="bi bi-x fa-2x close-btn"></i>
  </div>
  <h4 class="mt-n4 p-1 d-flex justify-content-center">Team Settings</h4>

  <div class="row">
    <div class="col">
      <div class="d-flex justify-content-between">
        <div>
          <button type="button" class="btn btn-primary btn-sm shadow-none p-2 me-2" (click)="getSubStreams()">Subscribed</button>
          <button type="button" class="btn btn-primary btn-sm shadow-none p-2" (click)="showAllAvailableTeams()">All streams</button>
        </div>
        <div class="d-flex justify-content-between">
          <input type="text" (keyup)="searchTeam($event)" class="form-control shadow-none team-search p-2" placeholder="Filter team" aria-label="team name" aria-describedby="basic-addon1">
          <i class="bi bi-plus-circle add-team p-2" title="Add a team" (click)="createTeam()"></i>
        </div>
      </div>
      <div class="team-names mt-3">
        <ul class="list-group">
          <li *ngFor="let team of filteredTeams" class="specific-team list-group-item list-group-item-action" (click)="selectTeam(team)">
            <p class="">{{team.name}}</p>
            <small class="fst-italic mt-0 pt-0">{{ team.description }}</small>
          </li>
        </ul>

      </div>
    </div>
    <div class="col create-stream">
      <div *ngIf="teamOfChoice">
        <div>
          <div class="d-flex justify-content-between py-2">

            <div class="btn-group" role="group" aria-label="Basic example">
              <button (click)="toggleCategory('general')" type="button" class="btn btn-sm btn-primary">
                General
              </button>
              <button (click)="toggleCategory('personal')" type="button" class="btn btn-sm btn-primary">
                Personal
              </button>
              <button (click)="toggleCategory('subscribers')" type="button" class="btn btn-sm btn-primary">
                Subscribers
              </button>
            </div>

            <button type="button" class="btn btn-primary p-2 btn-sm shadow-none" (click)="unsubscribeFromTeam()">Unsubscribe</button>

          </div>
          <div class="stream-content">

            <div class="stream-general pt-3" *ngIf="activeCategory === 'general'">
              <div class="d-flex justify-content-between">
                <h5>{{teamOfChoice.name}}</h5>
                <button class="btn btn-sm btn-primary" data-toggle="modal" (click)="editStream()">
                  Edit
                </button>
              </div>
              <p *ngIf="teamOfChoice.description">{{teamOfChoice.description}}</p>
              <p *ngIf="teamOfChoice.description == ''">No description for this team yet</p>

              <h5>
                Stream permissions
              </h5>
              <ul>
                <li>
                  This is a <strong>public stream</strong>. Any member of the organization can join without an invitation or view content sent to this stream.
                </li>
                <li>
                  All stream subscribers can post.
                </li>
              </ul>
            </div>

            <div class="stream-personal pt-3" *ngIf="activeCategory === 'personal'">
              <div class="d-flex">
                <h5>Personal settings</h5>
                <button class="btn btn-sm btn-outline-success ms-3">Saved</button>
              </div>

              <div class="py-2">
                <fieldset class="form-check">
                  <input type="checkbox" class="form-check-input">
                  <label class="form-check-label" >Mute stream</label>
                </fieldset>
                <fieldset class="form-check">
                  <input type="checkbox" class="form-check-input">
                  <label class="form-check-label">Pin stream to top of left sidebar</label>
                </fieldset>
              </div>

              <div class="py-2">
                <h5>Notification settings</h5>
                <fieldset class="form-check">
                  <input type="checkbox" class="form-check-input">
                  <label class="form-check-label">Visual desktop notifications</label>
                </fieldset>
                <fieldset class="form-check">
                  <input type="checkbox" class="form-check-input">
                  <label class="form-check-label">Audible desktop notifications</label>
                </fieldset>
                <fieldset class="form-check">
                  <input type="checkbox" class="form-check-input">
                  <label class="form-check-label">Mobile notifications</label>
                </fieldset>
                <fieldset class="form-check">
                  <input type="checkbox" class="form-check-input">
                  <label class="form-check-label">Email notifications</label>
                </fieldset>
                <fieldset class="form-check">
                  <input type="checkbox" class="form-check-input">
                  <label class="form-check-label">Notifications for @all/everyone mentions</label>
                </fieldset>
              </div>

            </div>
            <div class="stream-subscribers pt-3" *ngIf="activeCategory === 'subscribers'">

              <div>
                <div class="form-group stream-filter-users">
                  <label>Choose subscribers</label>

<!--                  <div *ngIf="filterWord">-->
<!--                    <div *ngFor="let member of (users$ | async) | userFilter: filterWord" class="stream-filter-users-list list-group">-->
<!--                      <button class="list-group-item list-group-item-action" (click)="addSingleUser(member)">-->
<!--                        <b>{{ member.full_name }}</b> <span>{{ member.email }}</span>-->
<!--                      </button>-->
<!--                    </div>-->
<!--                  </div>-->
<!--                  <div class="list-pm-members pb-2">-->
<!--                    <div class="pm-member" *ngFor="let member of oneByOneUser" (click)="removeFromOneByOneUser(member)">-->
<!--                      <p>{{member.full_name}}</p>-->
<!--                      <i class="bi bi-x"></i>-->
<!--                    </div>-->
<!--                  </div>-->
                </div>
                <div class="d-flex">
                  <input
                    style="flex: 1;"
                    type="text"
                    class="form-control"
                    placeholder="Add subscribers. Use usergroup or #streamname to bulk add subscribers">
                  <button class="btn btn-sm btn-outline-dark ms-2">Add</button>
                </div>
              </div>

            </div>

          </div>
        </div>
        <div class="d-flex justify-content-end">
          <ul class="searchable-users list-group">
            <li *ngFor="let show of searchResult" class="list-group-item filtered-user" (click)="addMemberToTeam(show)">
              {{ show.full_name }}
            </li>
          </ul>
        </div>
        <div class="d-flex justify-content-around">
          <input type="text" class="form-control shadow-none team-search p-2" placeholder="Search subscribers" aria-label="search" aria-describedby="basic-addon1" (keyup)="searchSubscriber($event)" >
          <input type="text" class="form-control shadow-none team-search p-2" placeholder="Name or email" aria-label="Name" aria-describedby="basic-addon1" [(ngModel)]="selectedUser.full_name" (keyup)="searchUser($event)">
          <button type="button" class="btn btn-primary p-2 btn-sm shadow-none" (click)="subscribeNewMember()" [disabled]="this.selectedUser.full_name == '' ">Add</button>
        </div>

        <div class="">
          <div class="user-names mt-4">
            <ul class="list-group">
              <li *ngFor="let user of filteredGroupMembers" class="list-group-item d-flex justify-content-between team-member">
                <span class="member-detail">{{user.full_name}}</span>
                <span class="member-detail">{{user.email}}</span>
              </li>
            </ul>
          </div>

        </div>
      </div>

      <div *ngIf="!teamOfChoice" >
       <app-new-team [userId$]="currentUserId$"></app-new-team>
      </div>
    </div>
  </div>

</div>

